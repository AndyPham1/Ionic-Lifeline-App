{"version":3,"sources":["./src/app/tab2/tab2.page.html","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.scss","./src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n      Distress\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\t<ion-button *ngIf=\\\"!alerting\\\" color=\\\"danger\\\" id=\\\"center\\\" (click)=\\\"GetHelp()\\\">CALL FOR HELP</ion-button>\\r\\n\\t<ion-card *ngIf=\\\"alerting\\\" color=\\\"success\\\">\\r\\n\\t  <ion-card-header>\\r\\n\\t    <ion-card-subtitle>{{helperCount}} responders alerted</ion-card-subtitle>\\r\\n\\t    <ion-card-title>Help is on the way!</ion-card-title>\\r\\n\\t  </ion-card-header>\\r\\n\\r\\n\\t  <ion-card-content>\\r\\n\\t    Here are some \\r\\n\\t  </ion-card-content>\\r\\n\\t</ion-card>\\r\\n</ion-content>\\r\\n\"","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab2Page } from './tab2.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    RouterModule.forChild([{ path: '', component: Tab2Page }])\r\n  ],\r\n  declarations: [Tab2Page]\r\n})\r\nexport class Tab2PageModule {}\r\n","module.exports = \"#center {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  margin-top: -50px;\\n  margin-left: -100px;\\n  width: 50%;\\n  height: 25%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi9DOlxcVXNlcnNcXFl1YW4gQ2hlblxcTGlmZWxpbmVcXGZyb250ZW5kL3NyY1xcYXBwXFx0YWIyXFx0YWIyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtBQ0FEIiwiZmlsZSI6InNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjZW50ZXIgXHJcbntcclxuXHRwb3NpdGlvbjogZml4ZWQ7XHJcblx0dG9wOiA1MCU7XHJcblx0bGVmdDogNTAlO1xyXG5cdG1hcmdpbi10b3A6IC01MHB4O1xyXG5cdG1hcmdpbi1sZWZ0OiAtMTAwcHg7XHJcblx0d2lkdGg6IDUwJTtcclxuXHRoZWlnaHQ6IDI1JTtcclxufVxyXG4iLCIjY2VudGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tdG9wOiAtNTBweDtcbiAgbWFyZ2luLWxlZnQ6IC0xMDBweDtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiAyNSU7XG59Il19 */\"","import { Component , OnInit} from '@angular/core';\r\n\r\nimport {\r\n  ToastController,\r\n  Platform,\r\n  LoadingController\r\n} from '@ionic/angular';\r\n\r\nimport { SocketService } from './../../services/socket.service';\r\n\r\n\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\n\r\n@Component({\r\n  selector: 'app-tab2',\r\n  templateUrl: 'tab2.page.html',\r\n  styleUrls: ['tab2.page.scss']\r\n})\r\nexport class Tab2Page {\r\n  location: any = {};\r\n  alerting: boolean = false;\r\n  socketId: any;\r\n  helperCount: number = 0;\r\n\r\n  constructor(private socket: SocketService, private platform: Platform, private geolocation: Geolocation) {}\r\n\r\n  async ngOnInit() {\r\n\r\n    // Since ngOnInit() is executed before `deviceready` event,\r\n    // you have to wait the event.\r\n    await this.platform.ready();\r\n    this.geolocation.getCurrentPosition({ enableHighAccuracy: true }).then((resp) => {\r\n      this.location = {'lat': resp.coords.latitude, 'lng': resp.coords.longitude};\r\n      console.log(this.location);\r\n    });\r\n\r\n    this.socket.updateDistressSignals()\r\n        .subscribe(signals => {\r\n          console.log(\"New Update\");\r\n          console.log(signals);\r\n          this.alerting = false;\r\n          if (signals.length > 0) {\r\n          \tfor (var i = 0; i < signals.length; i++) {\r\n\t\t      if (signals[i]['id'] === this.socketId) {\r\n\t\t      \tthis.alerting = true;\r\n\t\t        break;\r\n\t\t      }\r\n\t\t    }\r\n          }\r\n    });\r\n\r\n    this.socket.updateAlertStatus()\r\n        .subscribe((data) => {\r\n  \t\t\tthis.socketId = data.sessionId;\r\n  \t\t\tthis.alerting = data.alerting;\r\n  \t\t\tthis.helperCount = data.connectCounter;\r\n  \t\t});\r\n\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n  \tthis.socket.updateDistressSignals();\r\n  }\r\n\r\n  GetHelp(){\r\n  \tthis.platform.ready();\r\n\r\n  \tthis.geolocation.getCurrentPosition({\r\n  \t\tenableHighAccuracy: true\r\n  \t}).then((resp) => {\r\n  \t\tthis.location = {'coords': {'lat': resp.coords.latitude, 'lng': resp.coords.longitude}};\r\n  \t\tconsole.log(this.location);\r\n  \t\tthis.socket.emit(\"CreateDistressSignal\", this.location);\r\n  \t})\r\n  }\r\n}\r\n"],"sourceRoot":""}